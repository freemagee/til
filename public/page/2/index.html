<!doctype html><html class=no-js lang=en-gb><head><meta name=generator content="Hugo 0.55.5"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>TIL</title><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Neil Magee"><meta name=referrer content=no-referrer-when-downgrade><link href=https://til.neilmagee.com/images/favicon/favicon-16x16.png rel="shortcut icon" type=image/png><link rel=stylesheet href=https://til.neilmagee.com/css/style-a707518e.css></head><body><header class=site-header><section class=site-header__ident><a href=https://til.neilmagee.com/ class=site-header__link>TIL</a></section><nav class=site-header__nav><a href=https://til.neilmagee.com/about/ class=site-header__nav-item>About</a></nav></header><div class=site-container><div class=site-container__inner><main role=main id=content><div class="posts posts--home"><section class="post post--summary"><header class=post__header><a href=/posts/eslint-and-prettier-conflicts/ class=post__title>Resolve eslint and prettier conflicts</a><div class=post__meta><time class=post__date datetime=2019-02-12T10:07:40Z><span class=post__published>Published:</span>
<span class=post__published-value>2019-02-12</span></time><ul class=post__categories><li class=post__category><a href=https://til.neilmagee.com/categories/development/ class=post__category-link>development</a></li></ul></div></header><div class=post-content><p>Today I learned about a handy utility called <code>eslint-config-prettier-check</code> which I saw referenced in this GitHub <a href=https://github.com/prettier/prettier/issues/2609>issue</a>.</p><p>I was editting a <code>.vue</code> component in Visual Studio Code. I had a code section with red underlines, generally indicating that eslint was not happy with something. I could see it was a formatting issue, so I used <code>eslint --fix</code> to solve the issue and re-format the code. But then that triggered a new lint problem where <em>Prettier</em> was now unhappy with how <em>eslint</em> had formatted the code. The difference between the two is small, and involves a couple of indented spaces. See the images below for both examples.</p><figure><img src=/images/eslint-and-prettier-conflicts/eslint-formatted.png alt="Example of code formatted with eslint" loading=lazy><figcaption><h4>eslint Formatted</h4></figcaption></figure><figure><img src=/images/eslint-and-prettier-conflicts/prettier-formatted.png alt="Example of code formatted with Prettier" loading=lazy><figcaption><h4>Prettier Formatted</h4></figcaption></figure></div><footer class=post__footer><ul class=post__tags><li class=post__tag><a href=https://til.neilmagee.com/tags/eslint/ class=post__tag-link><span class=post__tag-label>#</span>eslint</a></li><li class=post__tag><a href=https://til.neilmagee.com/tags/vue/ class=post__tag-link><span class=post__tag-label>#</span>vue</a></li></ul><div class=post__truncated><a href=/posts/eslint-and-prettier-conflicts/ class=post__read-more><span class=post__read-more-label>Read full post</span>
<span class=post__read-more-icon><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M9.163 4.516c.418.408 4.502 4.695 4.502 4.695C13.888 9.43 14 9.715 14 10s-.112.57-.335.787c0 0-4.084 4.289-4.502 4.695-.418.408-1.17.436-1.615.0-.446-.434-.481-1.041.0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141.0-1.576C7.993 4.08 8.745 4.107 9.163 4.516z" /></svg></span></a></div></footer></section><section class="post post--summary"><header class=post__header><a href=/posts/apache-virtual-host-redirection-with-ssl/ class=post__title>Apache virtual host redirection with ssl</a><div class=post__meta><time class=post__date datetime=2019-02-04T14:54:05Z><span class=post__published>Published:</span>
<span class=post__published-value>2019-02-04</span></time><ul class=post__categories><li class=post__category><a href=https://til.neilmagee.com/categories/development/ class=post__category-link>development</a></li></ul></div></header><div class=post-content><p>Today I learned more about Apache virtual hosting and redirection. I decided to change my server host to <a href=https://www.digitalocean.com>Digital Ocean</a> a few months ago. There was nothing wrong with my then host, it was a shared web host, which I mainly used to access and manage with cPanel.</p><p>During my day job I have been administering a CentOS based virtual server hosted by Rackspace and have become more comfortable with using a SSH to manage it. <em>Comfortable</em>, but still with lots of Googling and Stack Overflowing.</p><p>So I thought I would challenge myself a bit and make the jump to Digital Ocean and take more control of my own server. I wanted to be able to make any sites I run use SSL via <a href=https://letsencrypt.org/>Let&rsquo;s Encrypt</a>. This was not possible with my old host, as they had a more traditional &ldquo;buy a certificate&rdquo; business model and I could not administer the server to install Certbot.</p><p>After setting this new server up and getting <strong>neilmagee.com</strong> served on port 80, I used Let&rsquo;s Encrypt to generate some certs for the <code>www</code> and <code>non-www</code> versions of the sites (<em>Why? See <a href=#notes>notes</a> at end of article</em>). This worked well, and I could now access <a href=https://neilmagee.com>https://neilmagee.com</a> and <a href=https://www.neilmagee.com>https://www.neilmagee.com</a>. My goal was to redirect all traffic (http{s} and www) to my canonical domain, <a href=https://neilmagee.com>https://neilmagee.com</a>.</p></div><footer class=post__footer><ul class=post__tags><li class=post__tag><a href=https://til.neilmagee.com/tags/apache/ class=post__tag-link><span class=post__tag-label>#</span>apache</a></li></ul><div class=post__truncated><a href=/posts/apache-virtual-host-redirection-with-ssl/ class=post__read-more><span class=post__read-more-label>Read full post</span>
<span class=post__read-more-icon><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M9.163 4.516c.418.408 4.502 4.695 4.502 4.695C13.888 9.43 14 9.715 14 10s-.112.57-.335.787c0 0-4.084 4.289-4.502 4.695-.418.408-1.17.436-1.615.0-.446-.434-.481-1.041.0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141.0-1.576C7.993 4.08 8.745 4.107 9.163 4.516z" /></svg></span></a></div></footer></section><section class="post post--summary"><header class=post__header><a href=/posts/jest-with-babel-7/ class=post__title>Get Jest working with Babel 7</a><div class=post__meta><time class=post__date datetime=2019-01-22T09:32:32Z><span class=post__published>Published:</span>
<span class=post__published-value>2019-01-22</span></time><ul class=post__categories><li class=post__category><a href=https://til.neilmagee.com/categories/development/ class=post__category-link>development</a></li></ul></div></header><div class=post-content><p>Today I learned how to get <a href=https://jestjs.io>Jest</a> to work with Babel 7. Often development involves tool configuration. I have lost many hours to this over the years. Something changes a version number and suddenly you are hunting through Stack Overflow and GitHub with a good idea of the problem, but lacking the <code>magic inscriptions</code> to solve it. Or there are version conflicts. Today&rsquo;s example is the latter.</p><p>I was writing a small tool for a maths problem, <a href=https://github.com/freemagee/number-difference-table>Number difference table</a>, and I thought it would benefit from having some unit tests written for it. I wanted to test some of the calculations and using the UI over and over, or console logging had become tedious.</p><p>So I chose to use <a href=https://jestjs.io>Jest</a> and installed it.</p><pre><code class=language-bash>yarn add -D jest
</code></pre></div><footer class=post__footer><ul class=post__tags><li class=post__tag><a href=https://til.neilmagee.com/tags/jest/ class=post__tag-link><span class=post__tag-label>#</span>jest</a></li></ul><div class=post__truncated><a href=/posts/jest-with-babel-7/ class=post__read-more><span class=post__read-more-label>Read full post</span>
<span class=post__read-more-icon><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M9.163 4.516c.418.408 4.502 4.695 4.502 4.695C13.888 9.43 14 9.715 14 10s-.112.57-.335.787c0 0-4.084 4.289-4.502 4.695-.418.408-1.17.436-1.615.0-.446-.434-.481-1.041.0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141.0-1.576C7.993 4.08 8.745 4.107 9.163 4.516z" /></svg></span></a></div></footer></section><section class="post post--summary"><header class=post__header><a href=/posts/react-simplify-components/ class=post__title>Simplify React components</a><div class=post__meta><time class=post__date datetime=2019-01-09T17:04:41Z><span class=post__published>Published:</span>
<span class=post__published-value>2019-01-09</span></time><ul class=post__categories><li class=post__category><a href=https://til.neilmagee.com/categories/development/ class=post__category-link>development</a></li></ul></div></header><div class=post-content><p>Today I learned a bit more about why setting props against state is considered an anti-pattern. After my <a href=https://til.neilmagee.com/posts/react-update-state-from-props/>previous article</a>, I was not happy with the component. It still felt like <code>getDerivedStateFromProps</code> was a hack rather than a maintainable fix. Plus in using the component, I was still triggering bugs that were quite situational.</p><p>I read more on <a href=https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html#recap>the react blog</a> and the recap really nailed what I needed to do.</p><blockquote><p>For example, rather than a child accepting a “committed” props.value and tracking a “draft” state.value, have the parent manage both state.draftValue and state.committedValue and control the child’s value directly.</p></blockquote><p>This accurately described a process, to make my component simpler (I think it qualifies as a controlled component now), that would remove side effects. So I set out to remove state from this component and make it&rsquo;s parent responsible for passing in the correct data as props.</p></div><footer class=post__footer><ul class=post__tags><li class=post__tag><a href=https://til.neilmagee.com/tags/react/ class=post__tag-link><span class=post__tag-label>#</span>react</a></li></ul><div class=post__truncated><a href=/posts/react-simplify-components/ class=post__read-more><span class=post__read-more-label>Read full post</span>
<span class=post__read-more-icon><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M9.163 4.516c.418.408 4.502 4.695 4.502 4.695C13.888 9.43 14 9.715 14 10s-.112.57-.335.787c0 0-4.084 4.289-4.502 4.695-.418.408-1.17.436-1.615.0-.446-.434-.481-1.041.0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141.0-1.576C7.993 4.08 8.745 4.107 9.163 4.516z" /></svg></span></a></div></footer></section><section class="post post--summary"><header class=post__header><a href=/posts/react-update-state-from-props/ class=post__title>Update state from props in React</a><div class=post__meta><time class=post__date datetime=2019-01-08T11:11:05Z><span class=post__published>Published:</span>
<span class=post__published-value>2019-01-08</span></time><ul class=post__categories><li class=post__category><a href=https://til.neilmagee.com/categories/development/ class=post__category-link>development</a></li></ul></div></header><div class=post-content><p>Today I learned how to use a new(ish) React lifecycle hook called <code>getDerivedStateFromProps</code> (<a href=https://reactjs.org/blog/2018/03/27/update-on-async-rendering.html#updating-state-based-on-props>link</a>). I have struggled a little bit with form components that allow you to edit data. In my example below it is &ldquo;user&rdquo; data, but in reality this could affect all forms with any data in React.</p><h2 id=overview>Overview</h2><p>The reason for the struggle is a slight conflict for the one true source of the data for the form. When the &ldquo;user&rdquo; is edited, and the <strong>user form component</strong> is used, data is fed into it via props from it&rsquo;s <em>parent component</em>. So the Employer and Job title current values can appear in their relevant inputs.</p><p>That would be ok if that data was static, but the data is not and it needs to be editable. So the props are copied into the <strong>user form component</strong> state. And this state is used as the value of the relevant inputs. That allows the inputs to receive new data, which triggers off a chain of events.</p><p>The new data is processed via a <code>handleChange</code> event in the <strong>user form component</strong>. Two things happen, it is added to the current state and also passed to a <em>parent component</em> for other actions to happen. When that <em>parent component</em> is done, it sends that data back to this <strong>user form component</strong> as props and the cycle can continue.</p></div><footer class=post__footer><ul class=post__tags><li class=post__tag><a href=https://til.neilmagee.com/tags/react/ class=post__tag-link><span class=post__tag-label>#</span>react</a></li></ul><div class=post__truncated><a href=/posts/react-update-state-from-props/ class=post__read-more><span class=post__read-more-label>Read full post</span>
<span class=post__read-more-icon><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M9.163 4.516c.418.408 4.502 4.695 4.502 4.695C13.888 9.43 14 9.715 14 10s-.112.57-.335.787c0 0-4.084 4.289-4.502 4.695-.418.408-1.17.436-1.615.0-.446-.434-.481-1.041.0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141.0-1.576C7.993 4.08 8.745 4.107 9.163 4.516z" /></svg></span></a></div></footer></section><section class="post post--summary"><header class=post__header><a href=/posts/git-undo-commit/ class=post__title>Undo a Git commit and redo</a><div class=post__meta><time class=post__date datetime=2019-01-03T14:52:45Z><span class=post__published>Published:</span>
<span class=post__published-value>2019-01-03</span></time><ul class=post__categories><li class=post__category><a href=https://til.neilmagee.com/categories/development/ class=post__category-link>development</a></li></ul></div></header><div class=post-content><p>Today I learned how to sort out a <strong>local</strong> mistake in Git<sup>1</sup>:</p><pre><code>$ git commit -m &quot;Something terribly misguided&quot;             # (1)
$ git reset HEAD~                                          # (2)
&lt;&lt; edit files as necessary &gt;&gt;                              # (3)
$ git add ...                                              # (4)
$ git commit -c ORIG_HEAD                                  # (5)
</code></pre><ol><li>This is what you want to undo</li><li>This leaves your working tree (the state of your files on disk) unchanged but undoes the commit and leaves the changes you committed unstaged (so they&rsquo;ll appear as &ldquo;Changes not staged for commit&rdquo; in <code>git status</code>, and you&rsquo;ll need to add them again before committing). If you only want to add more changes to the previous commit, or change the commit message<sup>2</sup>, you could use <code>git reset --soft HEAD~</code> instead, which is like <code>git reset HEAD~</code> (where <code>HEAD~</code> is the same as <code>HEAD~1</code>) but leaves your existing changes staged.</li><li>Make corrections to working tree files.</li><li>git add anything that you want to include in your new commit.</li><li>Commit the changes, reusing the old commit message. reset copied the old head to <code>.git/ORIG_HEAD</code>; <code>commit</code> with <code>-c ORIG_HEAD</code> will open an editor, which initially contains the log message from the old commit and allows you to edit it. If you do not need to edit the message, you could use the <code>-C</code> option.</li></ol></div><footer class=post__footer><ul class=post__tags><li class=post__tag><a href=https://til.neilmagee.com/tags/git/ class=post__tag-link><span class=post__tag-label>#</span>git</a></li></ul><div class=post__truncated><a href=/posts/git-undo-commit/ class=post__read-more><span class=post__read-more-label>Read full post</span>
<span class=post__read-more-icon><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M9.163 4.516c.418.408 4.502 4.695 4.502 4.695C13.888 9.43 14 9.715 14 10s-.112.57-.335.787c0 0-4.084 4.289-4.502 4.695-.418.408-1.17.436-1.615.0-.446-.434-.481-1.041.0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141.0-1.576C7.993 4.08 8.745 4.107 9.163 4.516z" /></svg></span></a></div></footer></section><section class="post post--summary"><header class=post__header><a href=/posts/php-the-right-way/ class=post__title>PHP The right way</a><div class=post__meta><time class=post__date datetime=2018-11-21T16:28:33Z><span class=post__published>Published:</span>
<span class=post__published-value>2018-11-21</span></time><ul class=post__categories><li class=post__category><a href=https://til.neilmagee.com/categories/development/ class=post__category-link>development</a></li></ul></div></header><div class=post-content><p>Today I learned about <a href=https://phptherightway.com/>PHP The right way</a>. Whilst I am a Frontend developer who focuses on JavaScript, CSS, HTML, UX, design etc etc, I am still responsible for writing PHP every now and again. That can be Wordpress themes or plugins, login systems and in the past I have written basic e-commerce. PHP is still my server side language of choice for my own projects.</p><p>I have made effort in my JavaScript to try to follow some practices - ESLint, Prettier for code formatting, use Babel, learn design patterns and more. But my PHP code style has always remained pretty procedural. Import some classes, set some variables, handle form input, and then write to a view using a template language (if possible). There is always inevitably a bunch of <code>if/else</code> statements. I never really feel like I am writing as clean code as my JavaScript and that my PHP knowledge is probably a bit dated.</p></div><footer class=post__footer><ul class=post__tags><li class=post__tag><a href=https://til.neilmagee.com/tags/php/ class=post__tag-link><span class=post__tag-label>#</span>php</a></li></ul><div class=post__truncated><a href=/posts/php-the-right-way/ class=post__read-more><span class=post__read-more-label>Read full post</span>
<span class=post__read-more-icon><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M9.163 4.516c.418.408 4.502 4.695 4.502 4.695C13.888 9.43 14 9.715 14 10s-.112.57-.335.787c0 0-4.084 4.289-4.502 4.695-.418.408-1.17.436-1.615.0-.446-.434-.481-1.041.0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141.0-1.576C7.993 4.08 8.745 4.107 9.163 4.516z" /></svg></span></a></div></footer></section></div><nav class=pagination><div class=pagination__ctrl><a href=/ class="pagination__nav pagination__nav--newer"><span class=pagination__nav-icon><svg id="Chevron_left" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M12.452 4.516c.446.436.481 1.043.0 1.576L8.705 10l3.747 3.908c.481.533.446 1.141.0 1.574-.445.436-1.197.408-1.615.0-.418-.406-4.502-4.695-4.502-4.695C6.112 10.57 6 10.285 6 10s.112-.57.335-.789c0 0 4.084-4.287 4.502-4.695C11.255 4.107 12.007 4.08 12.452 4.516z" class="pagination__nav-icon-newer" /></svg></span>Newer posts</a>
<a href=/page/3/ class="pagination__nav pagination__nav--older">Older posts<span class=pagination__nav-icon><svg id="Chevron_right" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20"><path d="M9.163 4.516c.418.408 4.502 4.695 4.502 4.695C13.888 9.43 14 9.715 14 10s-.112.57-.335.787c0 0-4.084 4.289-4.502 4.695-.418.408-1.17.436-1.615.0-.446-.434-.481-1.041.0-1.574L11.295 10 7.548 6.092c-.481-.533-.446-1.141.0-1.576C7.993 4.08 8.745 4.107 9.163 4.516z" class="pagination__nav-icon-previous" /></svg></span></a></div><span class=pagination__count>Page 2 of 4</span></nav></main><footer class=site-footer><div class=site-footer__inner><p class=site-footer__copyright>&copy; 2019 <a href=https://neilmagee.com>Neil Magee</a>. Icons from <a href=http://entypo.com>Entypo+</a>. Made with <a href=https://gohugo.io/ class=site-footer__hugo-logo><img src=/images/hugo-logo.png alt="Hugo logo" width=22 height=22></a></p></div></footer></div></div><script src=https://til.neilmagee.com/js/highlight.pack.js></script><script>document.addEventListener("DOMContentLoaded",event=>{document.documentElement.classList.remove("no-js");document.querySelectorAll("pre:not(.chroma) code").forEach(block=>{hljs.highlightBlock(block);});});</script></body></html>